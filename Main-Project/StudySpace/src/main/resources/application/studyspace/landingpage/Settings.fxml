<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="application.studyspace.controllers.landingpage.SettingsController"
            stylesheets="@../styles/settings/SettingsStyleSheet.css"
            style="-fx-background-color: #cfcfcf;">

    <!-- ================= ToggleGroup definitions ================= -->
    <fx:define>
        <ToggleGroup fx:id="navGroup"/>
        <ToggleGroup fx:id="typeToggleGroup"/>
    </fx:define>


    <!-- Sidebar -->
    <left>
        <AnchorPane>
            <VBox styleClass="sidebar"
                  AnchorPane.topAnchor="0"
                  AnchorPane.bottomAnchor="0"
                  AnchorPane.leftAnchor="0"
                  AnchorPane.rightAnchor="0">
                <Label text="Study Planner" styleClass="sidebar-title"/>
                <ToggleButton text="ðŸ“… Calendar"
                              styleClass="sidebar-button"
                              toggleGroup="$navGroup"
                              onAction="#handleSidebarCalendar"/>
                <ToggleButton text="ðŸ“Š Dashboard"
                              styleClass="sidebar-button"
                              toggleGroup="$navGroup"
                              selected="true"
                              onAction="#handleSidebarDashboard"/>
                <ToggleButton text="âš™ Settings"
                              styleClass="sidebar-button"
                              toggleGroup="$navGroup"
                              onAction="#handleSidebarSettings"/>
            </VBox>
        </AnchorPane>
    </left>


    <!-- Main content -->
    <center>
        <VBox alignment="CENTER" spacing="30" style="-fx-padding: 40;">
            <!-- Wrapper for both containers -->
            <HBox spacing="30" alignment="CENTER">
                <!-- Study Preferences -->
                <VBox spacing="20"
                      maxWidth="400"
                      maxHeight="600"
                      prefWidth="400"
                      prefHeight="600"
                      alignment="CENTER"
                      style="
                    -fx-background-color: white;
                    -fx-padding: 30;
                    -fx-background-radius: 15;
                    -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 12, 0, 0, 4);
                  ">
                    <Label text="Study Preferences" styleClass="main-title"/>

                    <!-- Preferred study time -->
                    <VBox spacing="8">
                        <Label text="Preferred study time" styleClass="field-label-bold"/>
                        <HBox spacing="8">
                            <Spinner fx:id="startTimeSpinner" prefWidth="150"/>
                            <Label text="to" />
                            <Spinner fx:id="endTimeSpinner" prefWidth="150"/>
                        </HBox>
                    </VBox>

                    <!-- Study session length -->
                    <VBox spacing="8">
                        <Label text="Study session length" styleClass="field-label"/>
                        <Slider fx:id="sessionLengthSlider"
                                min="10" max="180" value="30"
                                majorTickUnit="10"
                                snapToTicks="true"
                                blockIncrement="5"
                                styleClass="styled-slider"/>
                        <Label fx:id="sessionLengthLabel" text="30 min" styleClass="slider-value"/>
                    </VBox>

                    <!-- Break length -->
                    <VBox spacing="8">
                        <Label text="Break length" styleClass="field-label"/>
                        <Slider fx:id="breakLengthSlider"
                                min="5" max="60" value="10"
                                majorTickUnit="5"
                                snapToTicks="true"
                                blockIncrement="5"
                                styleClass="styled-slider"/>
                        <Label fx:id="breakLengthLabel" text="10 min" styleClass="slider-value"/>
                    </VBox>

                    <!-- Submit Button -->
                    <Button text="Submit Preferences"
                            fx:id="submitPreferencesBtn"
                            onAction="#handleSave"
                            styleClass="button"/>

                    <!-- MODULE 3: Blocked days -->
                    <VBox spacing="12"
                          alignment="TOP_LEFT"
                          styleClass="card-box"
                          prefWidth="350">
                        <Label text="Blocked days" styleClass="field-label-bold"/>
                        <HBox spacing="6">
                            <ToggleButton fx:id="monBtn" text="Mo" styleClass="day-square"/>
                            <ToggleButton fx:id="tueBtn" text="Tu" styleClass="day-square"/>
                            <ToggleButton fx:id="wedBtn" text="We" styleClass="day-square"/>
                            <ToggleButton fx:id="thuBtn" text="Th" styleClass="day-square"/>
                            <ToggleButton fx:id="friBtn" text="Fr" styleClass="day-square"/>
                            <ToggleButton fx:id="satBtn" text="Sa" styleClass="day-square"/>
                            <ToggleButton fx:id="sunBtn" text="Su" styleClass="day-square"/>
                        </HBox>
                    </VBox>

                </VBox>

                <!-- Settings -->
                <VBox spacing="20"
                      maxWidth="400"
                      maxHeight="600"
                      prefWidth="400"
                      prefHeight="600"
                      alignment="CENTER"
                      style="
                    -fx-background-color: white;
                    -fx-padding: 30;
                    -fx-background-radius: 15;
                    -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 12, 0, 0, 4);
                  ">
                    <Label text="Settings" styleClass="main-title"/>

                    <!-- Light/Dark Mode -->
                    <VBox spacing="10">
                        <Label text="Theme" styleClass="field-label-bold"/>
                        <ToggleButton fx:id="themeSwitch" text="Light Mode"
                                      styleClass="menu-button"/>
                    </VBox>

                    <!-- Reset Password -->
                    <VBox spacing="8">
                        <Label text="Reset Your Password" styleClass="field-label-bold"/>

                        <!-- New password row -->
                        <HBox spacing="5"
                              alignment="CENTER_LEFT"
                              maxWidth="Infinity"
                              HBox.hgrow="ALWAYS">
                            <PasswordField fx:id="NewPasswordField"
                                           promptText="Enter new password"
                                           styleClass="text-field"
                                           prefWidth="0"
                                           HBox.hgrow="ALWAYS"/>
                            <Label fx:id="passwordTooltip1"
                                   text="?"
                                   styleClass="circle-label"/>
                        </HBox>

                        <!-- Confirm password row -->
                        <HBox spacing="5"
                              alignment="CENTER_LEFT"
                              maxWidth="Infinity"
                              HBox.hgrow="ALWAYS">
                            <PasswordField fx:id="ConfirmPasswordField"
                                           promptText="Confirm new password"
                                           styleClass="text-field"
                                           prefWidth="0"
                                           HBox.hgrow="ALWAYS"/>
                            <Label fx:id="passwordTooltip2"
                                   text="?"
                                   styleClass="circle-label"/>
                        </HBox>
                    </VBox>
                    <Button text="Reset Password"
                            fx:id="resetPasswordBtn"
                            onAction="#handleResetPassword"
                            styleClass="button"/>
                </VBox>
            </HBox>
        </VBox>
    </center>


</BorderPane>